<div class="rooms-container">
  <div class="page-header">
    <h1>ğŸ¢ Rezervasyon Yap</h1>
    <p>Oda veya ekipman rezervasyonu yapabilirsiniz</p>
  </div>

  <div class="alert alert-success" *ngIf="successMessage">
    {{ successMessage }}
  </div>

  <div class="alert alert-danger" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Arama Formu -->
  <div class="card search-form">
    <h2>MÃ¼saitlik Sorgula</h2>
    
    <div class="form-row">
      <div class="form-group">
        <label>Rezervasyon Tipi</label>
        <div class="type-selector">
          <button 
            [class.active]="selectedType === 'room'"
            (click)="selectedType = 'room'; showReservationForm = false"
            class="type-btn"
          >
            ğŸ¢ Oda
          </button>
          <button 
            [class.active]="selectedType === 'equipment'"
            (click)="selectedType = 'equipment'; showReservationForm = false"
            class="type-btn"
          >
            ğŸ’» Ekipman
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="date">Tarih</label>
        <input
          type="date"
          id="date"
          class="form-control"
          [(ngModel)]="selectedDate"
          [min]="selectedDate"
        />
      </div>

      <div class="form-group">
        <label for="timeSlot">Zaman Dilimi</label>
        <select
          id="timeSlot"
          class="form-control"
          [(ngModel)]="selectedTimeSlotId"
        >
          <option [ngValue]="null">Zaman dilimi seÃ§iniz</option>
          <option *ngFor="let slot of timeSlots" [ngValue]="slot.timeSlotId">
            {{ slot.startTime }} - {{ slot.endTime }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <button 
          class="btn btn-primary"
          (click)="searchAvailability()"
          [disabled]="isLoading || !selectedDate || !selectedTimeSlotId"
        >
          {{ isLoading ? 'AranÄ±yor...' : 'MÃ¼saitlik Sorgula' }}
        </button>
      </div>
    </div>
  </div>

  <!-- MÃ¼sait Odalar/Ekipmanlar -->
  <div class="card" *ngIf="showReservationForm">
    <h2>
      {{ selectedType === 'room' ? 'MÃ¼sait Odalar' : 'MÃ¼sait Ekipmanlar' }}
    </h2>

    <div *ngIf="selectedType === 'room' && availableRooms.length === 0" class="empty-state">
      Bu tarih ve saat iÃ§in mÃ¼sait oda bulunmamaktadÄ±r.
    </div>

    <div *ngIf="selectedType === 'equipment' && availableEquipment.length === 0" class="empty-state">
      Bu tarih ve saat iÃ§in mÃ¼sait ekipman bulunmamaktadÄ±r.
    </div>

    <!-- Oda Listesi -->
    <div class="resource-grid" *ngIf="selectedType === 'room' && availableRooms.length > 0">
      <div 
        *ngFor="let room of availableRooms"
        class="resource-card"
        [class.selected]="selectedResourceId === room.roomId"
        (click)="selectedResourceId = room.roomId"
      >
        <div class="resource-icon">ğŸ¢</div>
        <h3>{{ room.name }}</h3>
        <p class="capacity">Kapasite: {{ room.capacity }} kiÅŸi</p>
        <span class="status" [ngClass]="getStatusClass(room.status)">
          {{ getStatusText(room.status) }}
        </span>
      </div>
    </div>

    <!-- Ekipman Listesi -->
    <div class="resource-grid" *ngIf="selectedType === 'equipment' && availableEquipment.length > 0">
      <div 
        *ngFor="let item of availableEquipment"
        class="resource-card"
        [class.selected]="selectedResourceId === item.equipmentId"
        (click)="selectedResourceId = item.equipmentId"
      >
        <div class="resource-icon">ğŸ’»</div>
        <h3>{{ item.name }}</h3>
        <p class="type">{{ item.type }}</p>
        <span class="status" [ngClass]="getStatusClass(item.status)">
          {{ getStatusText(item.status) }}
        </span>
      </div>
    </div>

    <div class="form-actions" *ngIf="(selectedType === 'room' && availableRooms.length > 0) || (selectedType === 'equipment' && availableEquipment.length > 0)">
      <button 
        class="btn btn-success btn-lg"
        (click)="makeReservation()"
        [disabled]="!selectedResourceId || isLoading"
      >
        {{ isLoading ? 'Kaydediliyor...' : 'Rezervasyon Yap' }}
      </button>
    </div>
  </div>

  <!-- TÃ¼m Kaynaklar -->
  <div class="card">
    <h2>{{ selectedType === 'room' ? 'TÃ¼m Odalar' : 'TÃ¼m Ekipmanlar' }}</h2>
    
    <div class="resource-grid" *ngIf="selectedType === 'room'">
      <div *ngFor="let room of rooms" class="resource-card info-only">
        <div class="resource-icon">ğŸ¢</div>
        <h3>{{ room.name }}</h3>
        <p class="capacity">Kapasite: {{ room.capacity }} kiÅŸi</p>
        <span class="status" [ngClass]="getStatusClass(room.status)">
          {{ getStatusText(room.status) }}
        </span>
      </div>
    </div>

    <div class="resource-grid" *ngIf="selectedType === 'equipment'">
      <div *ngFor="let item of equipment" class="resource-card info-only">
        <div class="resource-icon">ğŸ’»</div>
        <h3>{{ item.name }}</h3>
        <p class="type">{{ item.type }}</p>
        <span class="status" [ngClass]="getStatusClass(item.status)">
          {{ getStatusText(item.status) }}
        </span>
      </div>
    </div>
  </div>
</div>